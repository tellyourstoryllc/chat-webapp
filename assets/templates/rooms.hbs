{{! Mention notification audio tag. }}
<audio preload='auto' class='mention-sound'>
  <source src='/audio/mention_sound.mp4'>
  <source src='/audio/mention_sound.wav'>
</audio>
{{! Received regular message audio tag. }}
<audio preload='auto' class='receive-message-sound'>
  <source src='/audio/receive.m4a'>
</audio>

<div class='rooms-sidebar'>
  <ul class='rooms-list'>
    <li class='room-list-item'>
      {{#link-to 'rooms.index'}}Lobby{{/link-to}}
    </li>
    {{#if roomsLoaded}}
      {{#each room in rooms}}
        <li {{bind-attr class=':room-list-item room.isUnread:unread:read'}} {{action 'requestNotificationPermission'}}>
          {{#link-to 'rooms.room' room}}
            {{room-icon room=room}}
            {{room-avatar room=room}}
            {{room.name}}
            <span {{action 'closeRoom' room}} class='close-room'>&times;</span>
          {{/link-to}}
        </li>
      {{/each}}
    {{else}}
      Loading...
    {{/if}}
  </ul>

  <div class='current-user-status-bar'>
    <div class='current-user-status' {{action 'toggleChooseStatusMenu' target='view' bubbles=false}}>
      <span {{bind-attr class=':status-icon currentUser.status'}}></span> {{humanize currentUser.status}}
      <span class='idle-time'>{{App.idleForSeconds}}s</span>
    </div>
  </div>
</div>

<ul class='menu choose-status-menu' role='menu'>
  {{#each status in App.User.statuses}}
    <li class='menu-item' {{action 'setStatus' status target='view'}}>
      <span {{bind-attr class=':status-icon status.name'}}></span> {{status.title}}
    </li>
  {{/each}}
  <li class='separator'></li>
  <li class='menu-item' {{action 'logOut' target='view'}}>Log Out</li>
</ul>

<div class='room-content'>
  {{outlet}}

  {{rooms-container rooms=rooms activeRoom=activeRoom}}
</div>

<div class='room-members-sidebar'>
  <div class='title'>People</div>
  {{#if usersLoaded}}
    <ul class='room-members'>
      {{#each user in arrangedMembers}}
        <li class='room-member'>
          {{#link-to 'rooms.room' user}}
            <div>
              {{room-icon room=user}}
              <img {{bind-attr src='user.avatarUrl'}} {{bind-attr class=':small-avatar App.preferences.showAvatars::avatars-off'}}>
              {{user.name}}
            </div>
            {{#if user.shouldDisplayIdleDuration}}
              <div class='idle-duration'>{{duration user.mostRecentIdleDuration}}</div>
            {{/if}}
            {{#if user.statusText}}
              <div class='status-text'>{{user.statusText}}</div>
            {{/if}}
          {{/link-to}}
        </li>
      {{/each}}
    </ul>
  {{else}}
    <div class='loading'>
      Loading...
    </div>
  {{/if}}
</div>
